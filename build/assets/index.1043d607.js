import{_ as B,d as P,j as m,a as r,c as f,F as b,k as D,A as p,o as _,g as S,w as o,e as h,t as c,b as n,i as l,u as R,h as E}from"./index.57d0b522.js";import{d as N,b as w}from"./utils.b2ec6894.js";const A={class:"card-header"},V=l(" \xA0 "),j=l("\u67E5\u770B"),M=P({__name:"index",setup(U){const u=m({}),d=m({}),g=async()=>{(await p.lighthouse.describeRegions()).RegionSet.forEach(async e=>{u[e.Region]=e,e.InstanceCount=0,e.InstanceSet=[],I(e.Region)})},I=async t=>{const e=await p.lighthouse.describeInstances(t);return e.TotalCount>0&&(u[t].InstanceCount=e.TotalCount,u[t].InstanceSet.push(...e.InstanceSet),y(t)),e.TotalCount},y=async t=>{const e=await p.lighthouse.describeInstancesTrafficPackages(t);e.TotalCount>0&&e.InstanceTrafficPackageSet.forEach(a=>{d[a.InstanceId]=a.TrafficPackageSet.pop()})},C=t=>{if(!d[t])return"";const e=w(d[t].TrafficUsed),a=w(d[t].TrafficPackageTotal);return`${e} / ${a}`},k=t=>{const e=t.split("-"),a=e.pop();return t=e.join("-"),u[t]?u[t].RegionName+` ${a} \u533A`:""};return g(),(t,e)=>{const a=r("el-table-column"),F=r("el-button"),x=r("router-link"),v=r("el-table"),T=r("el-card");return _(),f("div",null,[(_(!0),f(b,null,D(u,i=>(_(),f(b,{key:i.Region},[i.InstanceCount>0?(_(),S(T,{key:0,shadow:"hover",class:"mgb10"},{header:o(()=>[h("div",A,[h("b",null,c(i.RegionName),1),V,h("small",null,"\u5B9E\u4F8B\u603B\u6570: "+c(i.InstanceCount),1)])]),default:o(()=>[n(v,{data:i.InstanceSet,"table-layout":"fixed"},{default:o(()=>[n(a,{fixed:"",prop:"InstanceName",label:"\u540D\u79F0","min-width":"150"}),n(a,{label:"\u5730\u57DF","min-width":"150"},{default:o(s=>[l(c(k(s.row.Zone)),1)]),_:1}),n(a,{prop:"CPU",label:"vCPU","min-width":"100"}),n(a,{label:"\u5185\u5B58","min-width":"100"},{default:o(s=>[l(c(s.row.Memory+" GiB"),1)]),_:1}),n(a,{label:"\u7CFB\u7EDF\u76D8","min-width":"150"},{default:o(s=>[l(c(s.row.SystemDisk.DiskSize+" GiB"),1)]),_:1}),n(a,{label:"\u6D41\u91CF(\u5DF2\u7528/\u603B\u91CF)","min-width":"180"},{default:o(s=>[l(c(C(s.row.InstanceId)),1)]),_:1}),n(a,{prop:"PrivateAddresses",label:"\u5185\u7F51 IP","min-width":"150"}),n(a,{prop:"PublicAddresses",label:"\u5916\u7F51 IP","min-width":"150"}),n(a,{label:"\u5230\u671F\u65F6\u95F4","min-width":"180"},{default:o(s=>[l(c(R(N)(s.row.ExpiredTime,"yyyy-MM-dd hh:mm:ss")),1)]),_:1}),n(a,{fixed:"right",label:"\u64CD\u4F5C",width:"180",align:"center"},{default:o(s=>[n(x,{to:"/lighthouse/detail/"+s.row.Zone+"/"+s.row.InstanceId},{default:o(()=>[n(F,{link:"",type:"primary",icon:"View"},{default:o(()=>[j]),_:1})]),_:2},1032,["to"])]),_:1})]),_:2},1032,["data"])]),_:2},1024)):E("v-if",!0)],64))),128))])}}});var Z=B(M,[["__scopeId","data-v-20bb1141"],["__file","D:/Workspace/qcloud-tdp/tdp-cloud-ui/src/apps/lighthouse/index.vue"]]);export{Z as default};
