import{_ as k,d as M,h as m,a as h,c as g,F as w,i as R,A as _,o as p,j as P,w as l,e as B,t as f,b as c,g as b,u as E,k as S}from"./index.c1473bac.js";function x(r,a=2){if(r==0)return"0 Bytes";const n=1024,i=["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],o=Math.floor(Math.log(r)/Math.log(n));return parseFloat((r/Math.pow(n,o)).toFixed(a))+" "+i[o]}function v(r,a){const n=new Date(r),i={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(const o in i)new RegExp("("+o+")").test(a)&&(a=a.replace(RegExp.$1,RegExp.$1.length==1?i[o]:("00"+i[o]).substr((""+i[o]).length)));return a}const D={class:"clearfix"},N=M({__name:"index",setup(r){const a=m({}),n=m({}),i=async()=>{(await _.lighthouse.describeRegions()).RegionSet.forEach(async e=>{a[e.Region]=e,e.InstanceCount=0,e.InstanceSet=[],o(e.Region)})},o=async t=>{const e=await _.lighthouse.describeInstances(t);return e.TotalCount>0&&(a[t].InstanceCount=e.TotalCount,a[t].InstanceSet.push(...e.InstanceSet),F(t)),e.TotalCount},F=async t=>{const e=await _.lighthouse.describeTrafficPackages(t);e.TotalCount>0&&e.InstanceTrafficPackageSet.forEach(s=>{n[s.InstanceId]=s.TrafficPackageSet.pop()})},y=t=>{if(!n[t])return"";const e=x(n[t].TrafficUsed),s=x(n[t].TrafficPackageTotal);return`${e} / ${s}`},I=t=>{const e=t.split("-"),s=e.pop();return t=e.join("-"),a[t]?a[t].RegionName+` ${s} \u533A`:""};return i(),(t,e)=>{const s=h("el-table-column"),C=h("el-table"),T=h("el-card");return p(),g("div",null,[(p(!0),g(w,null,R(a,d=>(p(),g(w,{key:d.Region},[d.InstanceCount>0?(p(),P(T,{key:0,shadow:"hover",class:"mgb10"},{header:l(()=>[B("div",D,[B("span",null,"\u8F7B\u91CF\u5B9E\u4F8B - "+f(d.RegionName),1)])]),default:l(()=>[c(C,{data:d.InstanceSet,"table-layout":"fixed"},{default:l(()=>[c(s,{fixed:"",prop:"InstanceName",label:"\u5B9E\u5217\u540D","min-width":"150"}),c(s,{label:"\u5730\u57DF","min-width":"150"},{default:l(u=>[b(f(I(u.row.Zone)),1)]),_:1}),c(s,{prop:"CPU",label:"vCPU","min-width":"100"}),c(s,{prop:"Memory",label:"\u5185\u5B58(GiB)","min-width":"100"}),c(s,{label:"\u6D41\u91CF(\u5DF2\u7528/\u603B\u91CF)","min-width":"180"},{default:l(u=>[b(f(y(u.row.InstanceId)),1)]),_:1}),c(s,{prop:"PrivateAddresses",label:"\u5185\u7F51 IP","min-width":"150"}),c(s,{prop:"PublicAddresses",label:"\u5916\u7F51 IP","min-width":"150"}),c(s,{label:"\u5230\u671F\u65F6\u95F4","min-width":"180"},{default:l(u=>[b(f(E(v)(u.row.ExpiredTime,"yyyy-MM-dd hh:mm:ss")),1)]),_:1})]),_:2},1032,["data"])]),_:2},1024)):S("v-if",!0)],64))),128))])}}});var A=k(N,[["__file","D:/Workspace/qcloud-tdp/tdp-cloud-ui/src/apps/lighthouse/index.vue"]]);export{A as default};
